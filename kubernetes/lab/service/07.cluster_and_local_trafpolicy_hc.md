# Посмотрим как выглядят hc у разных типов trafficpolicy на разных CNI.

## Cluster.
Общее поведение здесь заключается в том, что health check проверяются у всех нод в таргет группе балансера.

### Bridge.
Проверка идёт по пути /healthz и по порту 10256.
Порт 10256/TCP в Kubernetes используется для сервера проверки состояния (health check server) для kube-proxy.
Этот порт доступен на всех интерфейсах хостов, на которых работает kube-proxy, и не требует аутентификации. 

Проверки происходят раз в 10 секунд. И временем ожидания ответа равным 5 секундам.

### Calico.
Проверка идёт по пути /healthz и по порту 10256.
Порт 10256/TCP в Kubernetes используется для сервера проверки состояния (health check server) для kube-proxy.
Этот порт доступен на всех интерфейсах хостов, на которых работает kube-proxy, и не требует аутентификации.

Проверки происходят раз в 10 секунд. И временем ожидания ответа равным 5 секундам.

### Cilium.
Проверка идёт по пути /healthz и по порту 10256.
Порт 10256/TCP в Kubernetes используется для сервера проверки состояния (health check server) для kube-proxy.
Этот порт доступен на всех интерфейсах хостов, на которых работает kube-proxy, и не требует аутентификации.

Проверки происходят раз в 10 секунд. И временем ожидания ответа равным 5 секундам.

## Local.
Общее поведение здесь заключается в том, что health check проверяются у подов, которые отвечают за обработку трафика.
Поэтому не все ноды пройдут эту проверку. Те что не прошёл будут висеть в Unhealthy статусе.
Порты проверки рандомные из диапазона 30000-32767.

### Bridge.
Проверка идёт по пути /healthz и по порту 30261.

### Cilium.
Проверка идёт по пути /healthz и по порту 30769.

### Calico.
Проверка идёт по пути /healthz и по порту 31089.
